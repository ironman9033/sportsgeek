<div class="parent-container container-fluid">
  <div class="mat-elevation-z20 container main-container">
    <div class="conatiner-header">
      User Details
      <button
        class="right"
        mat-raised-button
        color="primary"
        (click)="openAssignForm()"
      >
        Assign Role
      </button>
    </div>
    <div class="inner-conatiner">
      <div class="inner-container-actions">
        <mat-form-field appearance="outline" color="accent">
          <mat-label>Search</mat-label>
          <input
            matInput
            placeholder="Type something here"
            type="search"
            style="color: white"
            (keyup)="applyFilter($event)"
          />

          <mat-icon color="accent" matSuffix>search</mat-icon>
        </mat-form-field>

        <button
          mat-fab
          color="accent"
          class="add-button"
          (click)="openUserForm(); $event.stopPropagation()"
          matTooltip="Add User"
        >
          <mat-icon>person_add</mat-icon>
        </button>
      </div>

      <table
        mat-table
        class="mat-elevation-z21"
        [dataSource]="dataSource"
        matSort
      >
        <ng-container matColumnDef="userId">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            ID
          </th>
          <td mat-cell *matCellDef="let element">{{ element.userId }}</td>
        </ng-container>

        <ng-container matColumnDef="firstName">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Name
          </th>
          <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
        </ng-container>

        <ng-container matColumnDef="genderName">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Gender
          </th>
          <td mat-cell *matCellDef="let element">{{ element.genderName }}</td>
        </ng-container>

        <ng-container matColumnDef="roleName">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Role
          </th>
          <td mat-cell *matCellDef="let element">{{ element.roleName }}</td>
        </ng-container>

        <ng-container matColumnDef="username">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Username
          </th>
          <td mat-cell *matCellDef="let element">{{ element.username }}</td>
        </ng-container>

        <ng-container matColumnDef="availablePoints">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Points
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.availablePoints }}
          </td>
        </ng-container>

        <ng-container matColumnDef="email">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Email
          </th>
          <td mat-cell *matCellDef="let element">{{ element.email }}</td>
        </ng-container>

        <ng-container matColumnDef="mobileNumber">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Phone No.
          </th>
          <td mat-cell *matCellDef="let element">{{ element.mobileNumber }}</td>
        </ng-container>

        <ng-container matColumnDef="delete">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Delete
          </th>
          <td
            mat-cell
            *matCellDef="let element"
            (click)="$event.stopPropagation(); deleteUser(element)"
          >
            <button mat-fab>
              <mat-icon> delete </mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="highlight"
          >
            Status
          </th>
          <td mat-cell *matCellDef="let element">
            <mat-slide-toggle
              (change)="changeActiveStatus(element.userId, !element.status)"
              (click)="$event.stopPropagation()"
              [checked]="getActiveStatus(element.userId)"
            >
            </mat-slide-toggle>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          [ngClass]="{ evenrow: index % 2 == 1 }"
          *matRowDef="let row; columns: displayedColumns; let index = index"
          (click)="updateUserForm(row)"
        ></tr>
      </table>
      <mat-paginator
        color="accent"
        [pageSizeOptions]="[10, 20]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>
</div>
